{% load static %}
<!-- Navbar-->
<header
  class="navbar navbar-expand-lg navbar-light bg-light fixed-top"
  data-scroll-header
>
  <div class="container">
    <a class="navbar-brand ms-3 ms-xl-4 logo" href="{% url 'home' %}"
      ><img
        class="d-block"
        src="{% static 'img/logo/logo-dark.svg' %}"
        width="116"
        alt="VidaHome"
    /></a>
    <button
      class="navbar-toggler ms-auto"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    {% if user.is_authenticated %}
    <div class="dropdown d-none d-lg-block order-lg-3">
      <a class="btn btn-sm text-primary dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="fi-user me-2"></i>{{ user.get_full_name|default:user.username }}
      </a>
      <ul class="dropdown-menu dropdown-menu-end">
        {% if user.is_superuser %}
        <li><a class="dropdown-item" href="{% url 'admin:index' %}"><i class="fi-settings me-2"></i>پنل مدیریت</a></li>
        {% else %}
        <li><a class="dropdown-item" href="{% url 'panel:dashboard' %}"><i class="fi-user me-2"></i>پنل کاربری</a></li>
        {% endif %}
        <li><hr class="dropdown-divider"></li>
        <li>
          <form method="post" action="{% url 'accounts:logout' %}" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="dropdown-item text-danger border-0 bg-transparent w-100 d-flex justify-content-start"><i class="fi-log-out ms-2"></i>خروج</button>
          </form>
        </li>
      </ul>
    </div>
    {% else %}
    <a class="btn btn-sm text-primary d-none d-lg-block order-lg-3" href="{% url 'accounts:login' %}"><i class="fi-user me-2"></i>ورود</a>
    {% endif %}<a
      class="btn btn-primary btn-sm ms-2 order-lg-3"
      href="{% if user.is_authenticated %}{% url 'panel:listing_add' %}{% else %}{% url 'accounts:login' %}?next={% url 'panel:listing_add' %}{% endif %}"
      ><i class="fi-plus me-2"></i>ثبت<span class="d-none d-sm-inline"> ملک</span></a
    >

    <div class="collapse navbar-collapse order-lg-2" id="navbarNav">
      <ul class="navbar-nav navbar-nav-scroll" style="max-height: 35rem">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'home' %}">صفحه اصلی</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'listing_catalog' %}">آگهی‌های املاک</a>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            >شهرها</a
          >
          <ul class="dropdown-menu">
            <li>
              <a class="dropdown-item" href="{% url 'cities_directory' %}"
                ><i class="fi-map-pin fs-base opacity-50 me-2"></i>همه شهرها</a
              >
            </li>
            {% if header_cities %}
            <li><hr class="dropdown-divider" /></li>
            {% for city in header_cities %}
            <li>
              <a class="dropdown-item" href="/s/{{ city.slug }}/"
                ><i class="fi-building fs-base opacity-50 me-2"></i>{{ city.fa_name }}</a
              >
            </li>
            {% endfor %}
            {% endif %}
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'categories:directory' %}">دسته‌بندی‌ها</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'agency_list' %}">مشاوران املاک</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'agent_list' %}">کارشناسان</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'blog:index' %}">بلاگ</a>
        </li>
        <li class="nav-item d-lg-none">
          {% if user.is_authenticated %}
          <form method="post" action="{% url 'accounts:logout' %}" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="nav-link border-0 bg-transparent w-100 d-flex justify-content-start"><i class="fi-log-out ms-2"></i>خروج</button>
          </form>
          {% else %}
          <a class="nav-link" href="{% url 'accounts:login' %}"><i class="fi-user me-2"></i>ورود</a>
          {% endif %}
        </li>
      </ul>
    </div>
  </div>
</header>
